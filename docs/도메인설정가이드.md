# ğŸŒ AWS ë„ë©”ì¸ ì„¤ì • ê°€ì´ë“œ

GitOps í”Œë«í¼ì—ì„œ ì‚¬ìš©í•  ë„ë©”ì¸ì„ ì„¤ì •í•˜ëŠ” ì™„ì „í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“‹ **ê°œìš”**

AWSì—ì„œ ë„ë©”ì¸ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€ 3ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤:

| ë°©ë²• | ì„¤ëª… | ê¶Œì¥ë„ | ë¹„ìš© |
|------|------|--------|------|
| **ì˜µì…˜ 1** | Route 53ìœ¼ë¡œ ìƒˆ ë„ë©”ì¸ êµ¬ì… | â­â­â­ | $12-50/ë…„ |
| **ì˜µì…˜ 2** | ê¸°ì¡´ ë„ë©”ì¸ì„ Route 53ìœ¼ë¡œ ì´ì „ | â­â­ | ë¬´ë£Œ (ì´ì „ë¹„ìš© ì—†ìŒ) |
| **ì˜µì…˜ 3** | ì™¸ë¶€ ë„ë©”ì¸ + Route 53 DNS | â­ | $0.50/ì›” |

## ğŸ›’ **ì˜µì…˜ 1: Route 53ìœ¼ë¡œ ìƒˆ ë„ë©”ì¸ êµ¬ì… (ê¶Œì¥)**

### **1ë‹¨ê³„: ë„ë©”ì¸ êµ¬ì…**

```bash
# AWS CLIë¡œ ë„ë©”ì¸ ê²€ìƒ‰
aws route53domains check-domain-availability --domain-name myproject.com --region us-east-1

# ë„ë©”ì¸ êµ¬ì… (ì˜ˆì‹œ)
aws route53domains register-domain \
  --domain-name myproject.com \
  --duration-in-years 1 \
  --admin-contact file://contact-info.json \
  --registrant-contact file://contact-info.json \
  --tech-contact file://contact-info.json \
  --region us-east-1
```

### **2ë‹¨ê³„: SSL ì¸ì¦ì„œ ë°œê¸‰**

```bash
# ACMì—ì„œ SSL ì¸ì¦ì„œ ìš”ì²­
aws acm request-certificate \
  --domain-name myproject.com \
  --subject-alternative-names "*.myproject.com" \
  --validation-method DNS \
  --region ap-northeast-2

# ì¸ì¦ì„œ ARN í™•ì¸
aws acm list-certificates --region ap-northeast-2
```

### **3ë‹¨ê³„: DNS ê²€ì¦ ì™„ë£Œ**

ACM ì½˜ì†”ì—ì„œ DNS ê²€ì¦ ë ˆì½”ë“œë¥¼ Route 53ì— ì¶”ê°€í•˜ê±°ë‚˜ ìë™ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.

## ğŸ”„ **ì˜µì…˜ 2: ê¸°ì¡´ ë„ë©”ì¸ì„ Route 53ìœ¼ë¡œ ì´ì „**

### **1ë‹¨ê³„: í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±**

```bash
# Route 53 í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±
aws route53 create-hosted-zone \
  --name myexistingdomain.com \
  --caller-reference $(date +%s)
```

### **2ë‹¨ê³„: ë„¤ì„ì„œë²„ ë³€ê²½**

```bash
# ë„¤ì„ì„œë²„ ì •ë³´ í™•ì¸
aws route53 get-hosted-zone --id /hostedzone/Z123456789 \
  --query 'DelegationSet.NameServers'
```

ê¸°ì¡´ ë„ë©”ì¸ ë“±ë¡ê¸°ê´€ì—ì„œ ë„¤ì„ì„œë²„ë¥¼ Route 53 ë„¤ì„ì„œë²„ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

### **3ë‹¨ê³„: SSL ì¸ì¦ì„œ ë°œê¸‰**

ì˜µì…˜ 1ì˜ 2ë‹¨ê³„ì™€ ë™ì¼í•©ë‹ˆë‹¤.

## ğŸŒ **ì˜µì…˜ 3: ì™¸ë¶€ ë„ë©”ì¸ + Route 53 DNS**

### **1ë‹¨ê³„: ì„œë¸Œë„ë©”ì¸ìš© í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±**

```bash
# dev ì„œë¸Œë„ë©”ì¸ìš© í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±
aws route53 create-hosted-zone \
  --name dev.myexternaldomain.com \
  --caller-reference $(date +%s)
```

### **2ë‹¨ê³„: ì™¸ë¶€ DNSì— NS ë ˆì½”ë“œ ì¶”ê°€**

ì™¸ë¶€ ë„ë©”ì¸ ê´€ë¦¬ íŒ¨ë„ì—ì„œ `dev.myexternaldomain.com`ì„ Route 53 ë„¤ì„ì„œë²„ë¡œ ìœ„ì„í•©ë‹ˆë‹¤.

## ğŸ”§ **ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©**

ë„ë©”ì¸ê³¼ SSL ì¸ì¦ì„œê°€ ì¤€ë¹„ë˜ë©´ ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x docs/AWS_Domain_Setup.md

# ë„ë©”ì¸ ì„¤ì • ì ìš©
./docs/AWS_Domain_Setup.md myproject.com arn:aws:acm:ap-northeast-2:123456789:certificate/abcd-1234
```

## ğŸ“‹ **ë‹¨ê³„ë³„ ì§„í–‰ ìˆœì„œ**

### **ì „ì²´ í”Œë¡œìš°**

```mermaid
graph TD
    A[ë„ë©”ì¸ ì„ íƒ] --> B{ë„ë©”ì¸ ìƒíƒœ}
    B -->|ì‹ ê·œ| C[Route 53 êµ¬ì…]
    B -->|ê¸°ì¡´| D[Route 53 ì´ì „] 
    B -->|ì™¸ë¶€| E[ì„œë¸Œë„ë©”ì¸ ìœ„ì„]
    
    C --> F[SSL ì¸ì¦ì„œ ìš”ì²­]
    D --> F
    E --> F
    
    F --> G[DNS ê²€ì¦]
    G --> H[ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸]
    H --> I[ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬]
    I --> J[DNS ë ˆì½”ë“œ ìƒì„±]
    J --> K[ì ‘ì† í…ŒìŠ¤íŠ¸]
```

### **1. ë„ë©”ì¸ ì¤€ë¹„**

```bash
# ë„ë©”ì¸ êµ¬ì… ë˜ëŠ” ì„¤ì • ì™„ë£Œ í›„
echo "ë„ë©”ì¸: myproject.com"
echo "SSL ì¸ì¦ì„œ ARN: arn:aws:acm:ap-northeast-2:123456789:certificate/abcd-1234"
```

### **2. GitOps ì„¤ì • ì—…ë°ì´íŠ¸**

```bash
# ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./docs/AWS_Domain_Setup.md myproject.com arn:aws:acm:ap-northeast-2:123456789:certificate/abcd-1234
```

### **3. ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬**

```bash
# EKS í´ëŸ¬ìŠ¤í„° ë°°í¬ (ì•„ì§ ì•ˆí–ˆë‹¤ë©´)
cd platform/aws/ap-northeast-2/terraform-codes
./scripts/deploy.sh

# ArgoCD ì„¤ì¹˜
cd ../../../../management/argo-cd
./scripts/setup.sh

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬
kubectl apply -f applications/projects/dev-apps.yaml
```

### **4. DNS ë ˆì½”ë“œ ìƒì„±**

```bash
# ALBê°€ ìƒì„±ë  ë•Œê¹Œì§€ ëŒ€ê¸° (2-3ë¶„)
kubectl get ingress -n bubblepool-dev -w

# DNS ë ˆì½”ë“œ ìë™ ìƒì„±
./scripts/setup-dns.sh
```

### **5. ì ‘ì† í™•ì¸**

```bash
# SSL ì¸ì¦ì„œ í™•ì¸
curl -I https://bubblepool-dev.myproject.com
curl -I https://guestbook-dev.myproject.com

# ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†
echo "BubblePool: https://bubblepool-dev.myproject.com"
echo "GuestBook: https://guestbook-dev.myproject.com"
```

## ğŸ” **ë¬¸ì œ í•´ê²°**

### **ì¼ë°˜ì ì¸ ë¬¸ì œë“¤**

#### **1. SSL ì¸ì¦ì„œ ê²€ì¦ ì‹¤íŒ¨**
```bash
# ì¸ì¦ì„œ ìƒíƒœ í™•ì¸
aws acm describe-certificate --certificate-arn arn:aws:acm:ap-northeast-2:123:certificate/abc --region ap-northeast-2

# DNS ê²€ì¦ ë ˆì½”ë“œ í™•ì¸
aws route53 list-resource-record-sets --hosted-zone-id Z123456789
```

#### **2. DNS ì „íŒŒ ì§€ì—°**
```bash
# DNS ì „íŒŒ í™•ì¸
nslookup bubblepool-dev.myproject.com
dig bubblepool-dev.myproject.com

# ì „íŒŒ ëŒ€ê¸° (ìµœëŒ€ 48ì‹œê°„, ë³´í†µ 10ë¶„)
```

#### **3. ALB ìƒì„± ì‹¤íŒ¨**
```bash
# ALB Controller ë¡œê·¸ í™•ì¸
kubectl logs -n kube-system -l app.kubernetes.io/name=aws-load-balancer-controller

# Ingress ìƒíƒœ í™•ì¸
kubectl describe ingress bubblepool-ingress -n bubblepool-dev
```

#### **4. ê¶Œí•œ ì˜¤ë¥˜**
```bash
# AWS ìê²©ì¦ëª… í™•ì¸
aws sts get-caller-identity

# Route 53 ê¶Œí•œ í™•ì¸
aws route53 list-hosted-zones
```

## ğŸ’° **ë¹„ìš© ì˜ˆìƒ**

### **Route 53 ë¹„ìš©**
- **í˜¸ìŠ¤íŒ… ì˜ì—­**: $0.50/ì›”
- **DNS ì¿¼ë¦¬**: $0.40/ë°±ë§Œ ì¿¼ë¦¬ (ì²˜ìŒ 10ì–µ ì¿¼ë¦¬)
- **ë„ë©”ì¸ ë“±ë¡**: $12-50/ë…„ (ë„ë©”ì¸ì— ë”°ë¼ ë‹¤ë¦„)

### **ACM SSL ì¸ì¦ì„œ**
- **ê³µì¸ ì¸ì¦ì„œ**: **ë¬´ë£Œ** (AWS ë¦¬ì†ŒìŠ¤ì™€ í•¨ê»˜ ì‚¬ìš©ì‹œ)

### **ALB ë¹„ìš©**
- **ALB**: $16.43/ì›” (í•­ìƒ ì‹¤í–‰)
- **LCU**: $5.84/ì›” (ë‚®ì€ íŠ¸ë˜í”½ ê¸°ì¤€)

### **ì´ ì˜ˆìƒ ë¹„ìš©**
- **ì›”ê°„**: ì•½ $23-25
- **ì—°ê°„**: ì•½ $290-320 (ë„ë©”ì¸ ê°±ì‹  í¬í•¨)

## ğŸ“š **ì°¸ê³  ìë£Œ**

### **AWS ë¬¸ì„œ**
- [Route 53 ê°œë°œì ê°€ì´ë“œ](https://docs.aws.amazon.com/route53/)
- [ACM ì‚¬ìš©ì ê°€ì´ë“œ](https://docs.aws.amazon.com/acm/)
- [ALB Controller ê°€ì´ë“œ](https://kubernetes-sigs.github.io/aws-load-balancer-controller/)

### **ìœ ìš©í•œ ëª…ë ¹ì–´**

```bash
# Route 53 í˜¸ìŠ¤íŒ… ì˜ì—­ ëª©ë¡
aws route53 list-hosted-zones

# SSL ì¸ì¦ì„œ ëª©ë¡
aws acm list-certificates --region ap-northeast-2

# ë„ë©”ì¸ ë“±ë¡ ìƒíƒœ í™•ì¸
aws route53domains get-domain-detail --domain-name myproject.com --region us-east-1

# DNS ë ˆì½”ë“œ í™•ì¸
aws route53 list-resource-record-sets --hosted-zone-id Z123456789
```

## ğŸ¯ **ë‹¤ìŒ ë‹¨ê³„**

ë„ë©”ì¸ ì„¤ì •ì´ ì™„ë£Œë˜ë©´:

1. **ëª¨ë‹ˆí„°ë§ ì„¤ì •**: Prometheus, Grafana ëŒ€ì‹œë³´ë“œ
2. **ë³´ì•ˆ ê°•í™”**: WAF, Security Groups ì¶”ê°€
3. **ì„±ëŠ¥ ìµœì í™”**: CloudFront CDN ì„¤ì •
4. **ë°±ì—… ì „ëµ**: Route 53 ì„¤ì • ë°±ì—…
5. **ë©€í‹° í™˜ê²½**: staging, prod í™˜ê²½ í™•ì¥

---

**ğŸ’¡ íŒ: ì²˜ìŒ ì„¤ì •í•  ë•ŒëŠ” ì˜µì…˜ 1 (Route 53 ì‹ ê·œ ë„ë©”ì¸)ì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì„¤ì •ì´ ê°€ì¥ ê°„ë‹¨í•˜ê³  AWS ì„œë¹„ìŠ¤ ê°„ í†µí•©ì´ ë§¤ë„ëŸ½ìŠµë‹ˆë‹¤.** 